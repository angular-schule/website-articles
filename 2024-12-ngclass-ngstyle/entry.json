{"slug":"2024-12-ngclass-ngstyle","html":"<p>Voraussichtlich in der Version 19.1 von Angular werden die Direktiven <code>ngClass</code> und <code>ngStyle</code> als <em>deprecated</em> markiert.\nIn diesem Blogpost erläutern wir die Hintergründe und die Migration.</p>\n<h2 id=\"tldr\">tl;dr</h2>\n<p>Die Direktiven <code>ngClass</code> und <code>ngStyle</code> werden als <em>deprecated</em>  markiert, siehe <a href=\"https://github.com/angular/angular/pull/58860\">Pull Request #58860</a>.\nSie können in der Regel nahtlos mit Property Bindings auf die nativen Propertys <code>class</code> und <code>style</code> ersetzt werden:</p>\n<pre><code class=\"language-html\"><span class=\"language-xml\"><span class=\"hljs-comment\">&lt;!-- VORHER --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">ngClass</span>]=<span class=\"hljs-string\">&quot;myClass&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">ngClass</span>]=<span class=\"hljs-string\">&quot;myClasses&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">ngClass</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ foo: isFoo() }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">ngStyle</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ color: &#x27;red&#x27; }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- NACHHER --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;myClass&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;myClasses&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ foo: isFoo() }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">style</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ color: &#x27;red&#x27; }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n</code></pre>\n<h2 id=\"die-direktiven-ngclass-und-ngstyle\">Die Direktiven <code>ngClass</code> und <code>ngStyle</code></h2>\n<p>Angular bietet seit jeher die beiden Attributdirektiven <code>ngClass</code> und <code>ngStyle</code> an.\nDamit können wir CSS-Klassen bzw. CSS-Stile auf ein DOM-Element im Template anwenden.</p>\n<p>Die Attribute <code>class</code> und <code>style</code> ermöglichen dies in HTML grundsätzlich mit <em>statischen</em> Werten:</p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;headline&quot;</span>&gt;</span>Headline<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;font-size: 1em&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n</code></pre>\n<p>Sollen CSS-Klassen und Stile dynamisch angewendet werden, z. B. aus Propertys der Komponentenklasse, helfen uns die beiden mitgelieferten Direktiven von Angular. In der letzten Zeile des folgenden Beispiels ist zu sehen, wie mehrere CSS-Klassen anhand von Bedingungen angewendet werden: <em>Die Klasse <code>danger</code> wird angewendet, wenn <code>isError()</code> den Wert <code>true</code> zurückgibt.</em> </p>\n<pre><code class=\"language-html\"><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> [<span class=\"hljs-attr\">ngClass</span>]=<span class=\"hljs-string\">&quot;myHeadlineClass&quot;</span>&gt;</span>Headline<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> [<span class=\"hljs-attr\">ngStyle</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ &#x27;font-size&#x27;: myFontSize }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;alert&quot;</span> [<span class=\"hljs-attr\">ngClass</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ danger: isError(), success: !isError() }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n</code></pre>\n<p>Diese Direktiven werden mit Angular 19.1 als deprecated markiert und in einer späteren Version entfernt.\nWas bedeutet das für die Templates unserer Angular-Anwendungen?</p>\n<h2 id=\"die-lösung-property-bindings-mit-class-und-style\">Die Lösung: Property Bindings mit <code>[class]</code> und <code>[style]</code></h2>\n<p>Mit Property Bindings können wir grundsätzlich auch alle nativen Propertys von DOM-Elementen beschreiben, darunter die Propertys <code>class</code> und <code>style</code>.\nDiese Schreibweise ist schon immer möglich und ist in einer Sonderform als <em>Class Binding</em> bzw. <em>Style Binding</em> bekannt.\nDamit können wir einzelne Klassen abhängig von einer Bedingung anwenden und Werte für CSS-Propertys schreiben:</p>\n<pre><code class=\"language-html\">&lt;p [style.font-<span class=\"hljs-keyword\">size</span>]=<span class=\"hljs-string\">&quot;myFontSize&quot;</span>&gt;&lt;/p&gt;\n\n&lt;<span class=\"hljs-keyword\">div</span> <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;alert&quot;</span> [<span class=\"hljs-keyword\">class</span>.danger]=<span class=\"hljs-string\">&quot;isError()&quot;</span> [<span class=\"hljs-keyword\">class</span>.success]=<span class=\"hljs-string\">&quot;!isError()&quot;</span>&gt;&lt;/<span class=\"hljs-keyword\">div</span>&gt;\n</code></pre>\n<p>Auch ohne diese Sonderform können wir <code>class</code> und <code>style</code> direkt mithilfe von Property Bindings abbilden.\nDabei funktionieren verschiedene Schreibweisen, die bisher auch mit <code>ngClass</code> und <code>ngStyle</code> möglich waren: als String, als Array von Strings oder als Objekt für Entscheidungen.</p>\n<pre><code class=\"language-html\"><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;myHeadlineClass&quot;</span>&gt;</span>Headline<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;[&#x27;foo&#x27;, &#x27;bar&#x27;]&quot;</span>&gt;</span>Headline mit mehreren Klassen<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> [<span class=\"hljs-attr\">style</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ &#x27;font-size&#x27;: myFontSize }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> [<span class=\"hljs-attr\">class</span>]=<span class=\"hljs-string\">&quot;</span></span></span><span class=\"hljs-template-variable\">{ alert: true, danger: isError(), success: !isError() }</span><span class=\"language-xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n</code></pre>\n<p>In den meisten Fällen können die Direktiven <code>ngClass</code> und <code>ngStyle</code> also nahtlos durch Property Bindings mit <code>class</code> und <code>style</code> ersetzt werden.\nDiese Migration ist mithilfe von <em>Suchen &amp; Ersetzen</em> im Editor unkompliziert möglich.\nAußerdem wird Angular wahrscheinlich ein Migrationsskript anbieten, um die Templates umzustellen.\nBitte vergessen Sie nicht, auch die Imports der Direktiven in der Komponentenklasse zu entfernen.</p>\n<h2 id=\"warum\">Warum?</h2>\n<p>Da mit den nativen Mitteln von Browser und Angular alle notwendigen Bindings erstellt werden können, ist es nicht mehr zwingend notwendig, die Direktiven zu verwenden.\nZusätzliche Bausteine erschweren es nicht nur, Angular zu lernen, sondern: Die Größe des ausgelieferten JavaScript-Bundles wächst mit jeder zusätzlichen Direktive.</p>\n<p>Wir haben die Templates unserer Website migriert und auf <code>ngClass</code> und <code>ngStyle</code> verzichtet. Die Ersparnis bei der Bundle-Größe betrug in diesem Szenario etwa 5 KB.</p>\n<h2 id=\"limitationen\">Limitationen</h2>\n<p>Obwohl <code>[class]</code> und <code>[style]</code> ein direkter Ersatz für die Direktiven sind, funktionieren einige wenige Details anders:</p>\n<ul>\n<li>Es kann kein <code>Set</code> übergeben werden. Es wird empfohlen, stattdessen ein Array zu verwenden.</li>\n<li>In der Objektschreibweise konnte ein Schlüssel auch mehrere Klassen oder CSS-Propertys beinhalten: <code>[ngClass]=&quot;{ &#39;foo bar&#39;: isFoo() }&quot;</code>. Diese Schreibweise ist mit dem nativen Binding nicht mehr möglich. Es wird empfohlen, die Klassen einzeln aufzuführen: <code>[class]=&quot;{ foo: isFoo(), bar: isFoo() }&quot;</code></li>\n</ul>\n<h2 id=\"fazit\">Fazit</h2>\n<p>Die Direktiven <code>ngClass</code> und <code>ngStyle</code> hatten lange ihre Berechtigung und waren ein wichtiges Werkzeug bei der Notation der HTML-Templates.\nInzwischen unterstützt Angular fast alle Schreibweisen aber auch mit Property Bindings auf die nativen DOM-Propertys <code>class</code> und <code>style</code>.\nWir empfehlen Ihnen also, auf die Direktiven zu verzichten und Property Bindings zu verwenden.\nWir begrüßen diesen Schritt sehr, die API-Oberfläche des Frameworks weiter zu verkleinern und unnötige Teile zu entfernen.</p>\n<hr>\n\n<p><small><strong>Titelbild:</strong> generiert mit Adobe Firefly</small></p>\n","meta":{"title":"Goodbye, ngClass und ngStyle!","author":"Ferdinand Malcher","mail":"ferdinand@malcher.media","published":"2024-11-27T00:00:00.000Z","lastModified":"2024-11-27T00:00:00.000Z","keywords":["Angular","Attributdirektiven","Direktiven","ngClass","ngStyle","Deprecation","Property Binding"],"language":"de","header":{"url":"ngclass.jpg","width":2000,"height":1100}}}
